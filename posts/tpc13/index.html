<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Updating ThinkPad C13 Yoga | Tech Shinobi</title>
<meta name="keywords" content="ThinkPad, C13, Yoga, MATE, LTSC, C13, Depthboot, keyd, Arkenfox, Optimazation, bootloader, Chromebook, Debloat, coreboot, system migration">
<meta name="description" content="2024 Update
MrChromebox.tech had a major update a few month ago, so I decide to move on as well.
But before that, use Clonezilla or rsync -aHAXS to back up the 32 GB emmc first.
Run in terminal, install &ldquo;Full UEFI Firmware&rdquo;
cd; curl -LO mrchromebox.tech/firmware-util.sh &amp;&amp; sudo bash firmware-util.sh
After reboot, a full version of  coreboot is installed, by replacing the previous SeaBIOS which is partial and limited.
This makes this laptop now with a free firmware. A free GNU/Linux distro is needed to be reinstalled.">
<meta name="author" content="Jun">
<link rel="canonical" href="https://techshinobi.org/posts/tpc13/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://techshinobi.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://techshinobi.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://techshinobi.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://techshinobi.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://techshinobi.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://techshinobi.org/posts/tpc13/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:url" content="https://techshinobi.org/posts/tpc13/">
  <meta property="og:site_name" content="Tech Shinobi">
  <meta property="og:title" content="Updating ThinkPad C13 Yoga">
  <meta property="og:description" content="2024 Update MrChromebox.tech had a major update a few month ago, so I decide to move on as well.
But before that, use Clonezilla or rsync -aHAXS to back up the 32 GB emmc first.
Run in terminal, install “Full UEFI Firmware” cd; curl -LO mrchromebox.tech/firmware-util.sh &amp;&amp; sudo bash firmware-util.sh
After reboot, a full version of coreboot is installed, by replacing the previous SeaBIOS which is partial and limited.
This makes this laptop now with a free firmware. A free GNU/Linux distro is needed to be reinstalled.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-16T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-02-16T00:00:00+00:00">
    <meta property="article:tag" content="ThinkPad">
    <meta property="article:tag" content="Yoga">
    <meta property="article:tag" content="MATE">
    <meta property="article:tag" content="LTSC">
    <meta property="article:tag" content="C13">
    <meta property="article:tag" content="Depthboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Updating ThinkPad C13 Yoga">
<meta name="twitter:description" content="2024 Update
MrChromebox.tech had a major update a few month ago, so I decide to move on as well.
But before that, use Clonezilla or rsync -aHAXS to back up the 32 GB emmc first.
Run in terminal, install &ldquo;Full UEFI Firmware&rdquo;
cd; curl -LO mrchromebox.tech/firmware-util.sh &amp;&amp; sudo bash firmware-util.sh
After reboot, a full version of  coreboot is installed, by replacing the previous SeaBIOS which is partial and limited.
This makes this laptop now with a free firmware. A free GNU/Linux distro is needed to be reinstalled.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://techshinobi.org/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Updating ThinkPad C13 Yoga",
      "item": "https://techshinobi.org/posts/tpc13/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Updating ThinkPad C13 Yoga",
  "name": "Updating ThinkPad C13 Yoga",
  "description": "2024 Update MrChromebox.tech had a major update a few month ago, so I decide to move on as well.\nBut before that, use Clonezilla or rsync -aHAXS to back up the 32 GB emmc first.\nRun in terminal, install \u0026ldquo;Full UEFI Firmware\u0026rdquo; cd; curl -LO mrchromebox.tech/firmware-util.sh \u0026amp;\u0026amp; sudo bash firmware-util.sh\nAfter reboot, a full version of coreboot is installed, by replacing the previous SeaBIOS which is partial and limited.\nThis makes this laptop now with a free firmware. A free GNU/Linux distro is needed to be reinstalled.\n",
  "keywords": [
    "ThinkPad", "C13", "Yoga", "MATE", "LTSC", "C13", "Depthboot", "keyd", "Arkenfox", "Optimazation", "bootloader", "Chromebook", "Debloat", "coreboot", "system migration"
  ],
  "articleBody": "2024 Update MrChromebox.tech had a major update a few month ago, so I decide to move on as well.\nBut before that, use Clonezilla or rsync -aHAXS to back up the 32 GB emmc first.\nRun in terminal, install “Full UEFI Firmware” cd; curl -LO mrchromebox.tech/firmware-util.sh \u0026\u0026 sudo bash firmware-util.sh\nAfter reboot, a full version of coreboot is installed, by replacing the previous SeaBIOS which is partial and limited.\nThis makes this laptop now with a free firmware. A free GNU/Linux distro is needed to be reinstalled.\nWhen done backing up the old OS, download preferred distro and boot it from an USB drive.\nPrepare another USB drive for /boot partition, since UEFI doesn’t work with the internal eMMc storage. This boot drive is necessary for every power-on or reboot. Choose a low-profile one so that is appropriate to be semi-permanent.\nWhile installation (custom), make the /boot and /boot/efi mounting points on the boot drive (sda), and everything else, like /, /home and swap on the internal storage (mmcblk0).\nThis UEFI boot workaround should also work with Windows system. Not only due to the reason I stated before, but also I really like the freeness of this laptop.\nIt is suggested to use a small-size (mine is 4GB), slow-speed but reliable USB drive for boot drive. Use some tools like RMPrepUSB or MBROSTool to test a USB drive and make backup boot drives with Clonezilla.\nIn the end, use rsync, Clonezilla or both to restore the old system folders like /home. There are extra files such as /etc/keyd/default.conf and a few software from /usr/share/ and /opt/*. After the new system booted, reinstall keyd and other softwares as needed. The only broken thing was my custom theme for mate. Changing to another theme is a quick fix.\nAfter this firmware upgrade, the sound card problem is fixed and the driver is now fully funtional out of the box.\nBelow is the original content dated at 2022-11-09.\nRecently, I got a new ThinkPad which took Lenovo over 2 month preparing for shipping. For the price, it worth waiting. This is the first Chromebook I’ve ever had, so I did quite a lot experiments with it.\nHardware The model is C13 Yoga Chromebook (MORPHIUS) with AMD Athlon gold 3015c (Picasso) 4GB RAM and 32GB eMMc storage.\nThere are multiple variations in C13 models and mine is the lowest-end of them. It is the cheapest ThinkPad I’ve ever seen, even cheaper than my old one (Sandy Bridge, bought used on 2016).\nThe stylus pen is thinner and the touchscreen isn’t compatible with my old stylus pen although they feel very similar on hand.\nForce Power-off There are a few techniques from the official documents. I tried and none of them works for a serious freeze like kernel panic. Therefore, I physically disabled the built-in battery for convenience. Fortunately, it’s fairly easy to do without leaving a scratch or tearing up any label.\nHard and doesn’t work: press Refresh ⟳ together with the Power button for about five seconds, and at the same time detach the ac power adapter from the Chromebook Works only for normal freeze: disconnect all power sources. Press and hold the power button for about seven seconds Firmware Disable CR50 hardware write protection and modify bootloader I followed instructions from coolstar, pl-luk, and Mrchromebox to replace Tianocore with coreboot + SeaBIOS.\nEnter Recovery Mode with ESC + ⟳ + Power: press/hold ESC and Refresh, then press Power for ~1s CTRL+D to switch to Developer Mode and confirm CTRL+D again to wipe userdata for Developer Mode Connect WiFi and select Browse as a Guest Use CTRL+ALT+T in Chrome to Open the CCD Run shell in the Crosh shell to switch shell Run sudo crossystem dev_boot_altfw=1 and sudo crossystem dev_boot_usb=1 and sudo crossystem dev_boot_signed_only=0; sync to enable extra boot entries Run sudo flashrom --wp-disable and sudo flashrom --wp-range=0,0 to disable write protection Run MrChromebox’s script: cd; curl -LO mrchromebox.tech/firmware-util.sh \u0026\u0026 sudo bash firmware-util.sh Reboot and either select Select alternate bootloader → Tianocore/coreboot (CTRL+L)\" or Boot from external Disk (CTRL+U) as needed Linux on ThinkPad C13 Yoga Tails Thanks to folks from r/chrultrabook. I found adding iommu=pt to the Grab2 menu options fixed the booting problem for many Live CD distros. Here are more parameters maybe useful:\nvideo=eDP-1:1920x1080-32@60 iommu=pt mem_encrypt=off amdgpu.ras_enable=0 amdgpu.audio=0 Depthboot I’ve tried the prebuild EupneaOS image and didn’t like its flavor. Therefore, I followed Depthboot instructions to build from scratch.\nOn a Linux machine, insert a USB drive and run git clone --depth=1 https://github.com/eupnea-linux/depthboot-builder; cd depthboot-builder; ./main.py inside a terminal Choose a flavor, select the USB drive to flash directly, for me its sdb, and it takes a few mins to finish Put the depthboot USB drive into the Chromebook and hit Ctrl+U (Boot from external disk) at the bootloader Boot into the newly created Linux and test everything out. In my case, only the sound card and suspend has issue Connect to internet, then open a terminal, update and run setup-audio to fix the sound card driver (acp3xalc5682m98357) run install-to-internal to start installation. It will use /dev/mmcblk1 which means wiping the entire 32GB eMMc/HDD without preserving Chrome OS partition When installation finishes, reboot and use Ctrl+D (Boot from internal disk) to boot into the new system Depthboot created Linux distros runs pretty well on my C13. Suspend doesn’t suppose to work on this hardware and I don’t really need it. The sound card is far more problematic because acp3xalc5682m98357 (Maxim 98357a) is a tough one to work with.\nThanks to eupnea-audio-script. With kernel version 5.10.131, I was able to get the built-in speakers working but not for the headphone port. Here’s more test results:\nSemi-functional sound card under Fedora 37, Pop!_OS 22.04 LTS and Ubuntu 22.10—speakers are fixed but not for the headphone port Not working sound card under Ubuntu LTS 22.04 and Arch—the script didn’t fix anything Workarounds are plenty, for example, using Bluetooth headphones or buying a cheap small USB sound card like C-Media ones that can plug n play.\nMATE Desktop Environment Breath used to provide MATE as one of the desktop options. Depthboot added Pop!_OS which is very nice but removed my favorite DE from all distros.\nMATE consumes much less resources while provides a decent UX/UI. Because of that, it’s superior than any other desktop options for my C13. Most important, GNOME 2 was my first daily driver linux desktop.\nUse Depthboot main.py script to create a cli(no desktop) version of fedora, ubuntu cli had minor booting issue Boot into the Dephboot drive on C13 and use nmtui → Active a connection to connect WiFi Run install-to-internal and sudo reboot. Boot into internal disk and log into fedora cli To install MATE, run sudo dnf -y group install \"MATE-Desktop\" or for less package sudo dnf -y install @mate-desktop. In case of installing as secondary DE, add --allowerasing to resolve conflicts Run echo \"exec /usr/bin/mate-session\" \u003e\u003e ~/.xinitrcand startx to launch MATE Fix twice login problem It happens to LightDM, so both MATE and Xfce can be affected. Run these lines to switch from lightdm to sddm\ndnf install sddm systemctl disable lightdm systemctl enable sddm reboot Use setup-audio to fix the sound card. After reboot, go to Sound Preferences/PulseAudio switch Profile into Pro Audio. Xfce and MATE doesn’t support volume function keys by default, go to System Settings - Hardware - Keyboard - Layouts switch Keyboard model into Google - Chromebook to enable all function keys.\nRemap missing keys with keyd However, I switched it back to Generic - Generic 104-key PC since I need a normal keyboard experience for blogging, coding and SSH.\nInstall keyd\ngit clone https://github.com/rvaiya/keyd cd keyd make \u0026\u0026 sudo make install modprobe uinput chmod a+r+w /dev/uinput sudo systemctl enable keyd \u0026\u0026 sudo systemctl start keyd Keep uinput loaded after reboot for keyd\n#Add self to the input and uinput groups sudo usermod -aG input $USERNAME sudo groupadd uinput sudo usermod -aG uinput $USERNAME #Create auto load files for uinput module echo 'KERNEL==\"uinput\", SUBSYSTEM==\"misc\", MODE=\"0660\", GROUP=\"uinput\"' | sudo tee /etc/udev/rules.d/90-uinput.rules echo uinput | sudo tee /etc/modules-load.d/uinput.conf Run sudo keyd -m to read key press; create config file sudo pluma /etc/keyd/default.conf and save it with desired code\n[ids] * [main] # Remaps Tools/Lock key to Del f13 = delete # Remaps Search/meta/magnifier to Caps Lock leftmeta = capslock # Remaps right Ctrl key to Win/Meta/Super/Mod4 #rightcontrol = leftmeta # Recovers missing F11, F12, [control] f9 = f11 f10 = f12 [main] # Use left Alt as Fn/ISO_Level3_Shift key [alt] # Recovers Home/End, PgUp/PgDn, PrtScr left = home right = end up = pageup down = pagedown f5 = sysrq # Remaps Function keys f6 = brightnessdown f7 = brightnessup f8 = mute f9 = volumedown f10 = volumeup [main] # Use right Alt as Fn/ISO_Level3_Shift key [altgr] # Recovers Home/End, PgUp/PgDn, PrtScr left = home right = end up = pageup down = pagedown f5 = sysrq # Remaps Function keys f6 = brightnessdown f7 = brightnessup f8 = mute f9 = volumedown f10 = volumeup # More examples: https://github.com/rvaiya/keyd/blob/master/docs/keyd.scdoc Run sudo keyd reload to see result\nMy layout is based on coolstarorg’s chromebookremap.ahk by using both sides of ALT as the Fn key instead of Ctrl. It brings back all missing keys such as F11/F12, volume controls and the ability to Ctrl+Alt+Del. Now we can have a fully functional keyboard on a Chromebook.\nOptimize Liunx For my C13, I think the cost of timeshift is more than what I can get from it. I’d rather use traditional backup methods like clonezilla or simply tar occasionally. Always make backups before doing anything funny.\nGo to System Settings - Hardware - Keyboard Shortcuts or run dconf-editor to setup hotkeys. I rebind some combinations from Meta/Super to left Alt\nChange font rendering DPI from 96 to 130; Find some cohesive dark theme that follows ThinkPad’s design language; Disable mouse acceleration and touchpad;\nI modified this script to disable hires scrolling and mouse acceleration at same shot. sudo dnf install xinput first, save desired code in a .sh file, run chmod +x script.sh from terminal to ensure its permission and add it into System - Personal - Preferences - Startup Applications.\n#!/bin/sh device=\"TPPS/2 Elan TrackPoint\" if xinput list --id-only \"${device}\" \u003e /dev/null 2\u003e\u00261; then xinput --set-prop \"${device}\" 'libinput Accel Profile Enabled' 0, 1 xinput --set-prop \"${device}\" 'libinput Accel Speed' 0 xinput --set-prop \"${device}\" 'libinput Scrolling Pixel Distance' 40 #Fastest to slowest 10-50 xinput --set-prop \"${device}\" 'libinput High Resolution Wheel Scroll Enabled' 0 notify-send \"Mouse settings applied\" else echo \"Unable to find device ${device}\" \u003e\u00262 exit 1 fi Disabe useless autostarts (most of them) from System - Personal - Startup Applications - Show hidden or by using Stacer with root privilege; Remove bloatware like flatpak and abrt bug report services from terminal sudo dnf -y remove xdg-desktop-portal sudo systemctl -t service | grep abrt sudo systemctl stop abrt-journal-core.service sudo systemctl disable abrt-journal-core.service sudo systemctl stop abrt-oops.service sudo systemctl disable abrt-oops.service sudo systemctl stop abrt-xorg.service sudo systemctl disable abrt-xorg.service sudo systemctl stop abrtd.service sudo systemctl disable abrtd.service At this point, on idle the system’s memory/CPU usage should be like 700-800MB/1-2%. Under normal load surfing with 5-6 tabs while playing FreeTube with 720p video, memory/CPU is around 2.6GB-2.8GB/20-50%. No lag or freeze what so ever.\nTo be more efficient, use some not-so-memory-hungry web browsers such as midori, Pale Moon and Otter. Although it is totally fine to stick with LibreWolf or Firefox+Arkenfox running full loads of extensions.\nArkenfox the easy way For applying Arkenfox on stock Firefox\nGo to about:support and open Profile Directory\nClose Firefox and backup the entire profile dir. Download the user.js and prefsCleaner.sh inside the profile dir along with prefs.js\nRun these lines and restart Firefox\ncd /home/username/.mozilla/firefox/s0m3th1ng.default/ wget https://raw.githubusercontent.com/arkenfox/user.js/master/user.js https://raw.githubusercontent.com/arkenfox/user.js/master/prefsCleaner.sh chmod +x prefsCleaner.sh user.js ./prefsCleaner.sh If need persistent log in, modify user.js with followings user_pref(\"privacy.clearOnShutdown.cookies\", false); user_pref(\"privacy.clearOnShutdown.offlineApps\", false); user_pref(\"browser.sessionstore.privacy_level\", 0); user_pref(\"browser.startup.page\", 3); user_pref(\"places.history.enabled\", true); user_pref(\"privacy.sanitize.sanitizeOnShutdown\", false); user_pref(\"network.cookie.lifetimePolicy\", 2); Windows on ThinkPad C13 Yoga Although coolstar has C13 with AMD 3015ce in its guide, it is not for the lowest end variation. If I run the script, it would say “Detected eMMC” and “UEFI only supports NVMe SSDs currently”.\nWithout the bootloader files created by that script, I can’t pass the “ACPI_BIOS_ERROR” when booting up ANY version of Windows. Therefore, I decided to run the script code manually for the bootloader files.\nPrepare the bootloader files On the Chromebook, boot into Linux either from internal disk or USB. Save these cut-out code in a .sh file and run sudo ./newscript.sh in terminal\necho \"Downloading OpenCore + rEFInd\" curl -L -O https://coolstar.org/chromebook/windows-rwl/opencore-refind-rwl-generic.tar.gz mkdir -p /tmp/efi/efi/boot echo_green \"Installing OpenCore + rEFInd\" tar xf opencore-refind-rwl-generic.tar.gz -C /tmp/efi/efi/boot mv /tmp/efi/efi/boot/OC /tmp/efi/efi/OC mv /tmp/efi/efi/boot/refind /tmp/efi/efi/refind echo \"Downloading Tools..\" curl -L -O https://coolstar.org/chromebook/windows-rwl/iasl.gz curl -L -O https://coolstar.org/chromebook/windows-rwl/patch.gz gzip -d iasl.gz gzip -d patch.gz rm -rf /usr/local/bin/iasl /usr/local/bin/patch mkdir -p /usr/local/bin mv iasl /usr/local/bin/ mv patch /usr/local/bin chmod +x /usr/local/bin/iasl chmod +x /usr/local/bin/patch echo \"Dumping System ACPI tables\" mkdir -p /tmp/fwpatch cat /sys/firmware/acpi/tables/DSDT \u003e /tmp/fwpatch/dsdt.aml if grep -q COREBOOT /sys/firmware/acpi/tables/SSDT1; then echo \"Found COREBOOT SSDT1\" cat /sys/firmware/acpi/tables/SSDT1 \u003e /tmp/fwpatch/ssdt.aml fi if grep -q COREBOOT /sys/firmware/acpi/tables/SSDT2; then echo \"Found COREBOOT SSDT2\" cat /sys/firmware/acpi/tables/SSDT2 \u003e /tmp/fwpatch/ssdt.aml fi echo \"Disassembling ACPI tables\" iasl -d /tmp/fwpatch/dsdt.aml /tmp/fwpatch/ssdt.aml echo \"Downloading Patches\" curl -L -O https://coolstar.org/chromebook/windows-rwl/acpipatches.tar.gz tar xf acpipatches.tar.gz -C /tmp/fwpatch if $(true); then echo \"Applying Patches\" pushd /tmp/fwpatch #Enter Firmware patch stage echo \"Applying DSDT Patch (Zen2 Chrome EC BSOD Fix)\" patch -s -F 3 -i patches/zen2-crec-fix.patch dsdt.dsl echo \"Applying DSDT Patch (Zen2 GPIO Fix)\" patch -s -F 3 -i patches/zen2-gpio.patch dsdt.dsl echo \"Applying DSDT Patch (Zen2 UART Fix)\" patch -s -F 3 -i patches/zen2-uart.patch dsdt.dsl echo \"Applying DSDT Patch (Zen2 Remove MISC)\" patch -s -F 3 -i patches/zen2-nomisc.patch dsdt.dsl echo \"Applying DSDT Patch (Zen2 Remove AAHB)\" patch -s -F 3 -i patches/zen2-noaahb.patch dsdt.dsl if grep -q GOOG0002 dsdt.dsl; then echo \"Applying DSDT Patch (Zen2 Keyboard Backlight)\" patch -s -F 3 -i patches/zen2-kblt-scope.patch dsdt.dsl fi if grep -q GOOG0015 dsdt.dsl; then echo \"Applying DSDT Patch (Morphius No Trackpoint)\" patch -s -F 7 -i patches/morphius-no-trackpoint.patch dsdt.dsl fi if grep -q GOOG0006 dsdt.dsl; then echo \"Applying DSDT Patch (Zen2 Tablet Mode)\" patch -s -F 5 -i patches/zen2-tabletmode.patch dsdt.dsl fi if grep -q DPTC ssdt.dsl; then echo \"Applying SSDT Patch (Syntax Fix)\" patch -s -F 3 -i patches/morphius-syntax-fix.patch ssdt.dsl fi if grep -q RTD2141B ssdt.dsl; then echo \"Applying SSDT Patch (Remove MST HUB)\" patch -s -F 3 -i patches/nomst.patch ssdt.dsl fi if grep -q AMDI5682 ssdt.dsl; then echo \"Applying SSDT Patch (Remove AMDI5682)\" patch -s -F 5 -i patches/zen2-nomach.patch ssdt.dsl fi if grep -q AMDI1015 ssdt.dsl; then echo \"Applying SSDT Patch (Remove AMDI1015)\" patch -s -F 5 -i patches/zen2-nomach1015.patch ssdt.dsl fi if grep -q \"Fingerprint Reader\" ssdt.dsl; then echo \"Applying SSDT Patch (Fingerprint Fix)\" patch -s -F 3 -i patches/fingerprintfix.patch ssdt.dsl fi if grep -q ELAN0000 ssdt.dsl; then if [ \"$isElanPad\" = true ]; then echo \"Applying SSDT Patch (Elan Touchpad)\" patch -s -F 3 -i patches/elantp.patch ssdt.dsl else echo \"Applying SSDT Patch (No Elan Touchpad)\" patch -s -F 3 -i patches/noelantp.patch ssdt.dsl fi fi if grep -q \"Synaptics Touchpad\" ssdt.dsl; then if [ \"$isSynapticsPad\" = true ]; then echo \"Applying SSDT Patch (Synaptics Touchpad)\" patch -s -F 3 -i patches/synatp.patch ssdt.dsl else echo \"Applying SSDT Patch (No Synaptics Touchpad)\" patch -s -F 3 -i patches/nosynatp.patch ssdt.dsl fi fi if grep -q RAYD0001 ssdt.dsl; then if [ \"$isRaydiumTouch\" = true ]; then echoerr \"Warning: Raydium Touchscreen is currently unsupported\" fi echo \"Applying SSDT Patch (No Raydium Touchscreen)\" patch -s -F 3 -i patches/noraydiumts.patch ssdt.dsl fi if grep -q ELAN0001 ssdt.dsl; then if [ \"$isElanTouch\" = true ]; then echo \"Applying SSDT Patch (Elan Touchscreen)\" patch -s -F 3 -i patches/elants.patch ssdt.dsl else echo \"Applying SSDT Patch (No Elan Touchscreen)\" patch -s -F 3 -i patches/noelants.patch ssdt.dsl fi fi if grep -q ELAN9008 ssdt.dsl; then if [ \"$isElanHIDTouch\" = true ]; then echo \"No Patch required (Elan HID Touchscreen)\" else echo \"Applying SSDT Patch (No Elan HID Touchscreen)\" patch -s -F 6 -i patches/noelan9008ts.patch ssdt.dsl fi fi if grep -q GTCH7503 ssdt.dsl; then if [ \"$isG2Touch\" = true ]; then echo \"No Patch required (G2 Touchscreen)\" else echo \"Applying SSDT Patch (No G2 Touchscreen)\" patch -s -F 3 -i patches/nog2touch.patch ssdt.dsl fi fi if grep -q GDIX0000 ssdt.dsl; then if [ \"$isGdixTouch\" = true ]; then echo \"No Patch required (GDIX Touchscreen)\" else echo \"Applying SSDT Patch (No GDIX Touchscreen)\" patch -s -F 3 -i patches/nogdixts.patch ssdt.dsl fi fi if grep -q 10EC1015 ssdt.dsl; then echo \"Applying SSDT Patch (Vilboz Duplicate I2C)\" patch -s -F 5 -i patches/vilboz-nodupi2c.patch ssdt.dsl sed -i 's/TUN1/TUN0/g' ssdt.dsl fi popd fi echo \"Compiling ACPI tables\" mv /tmp/fwpatch/dsdt.dsl /tmp/fwpatch/dsdt-modified.dsl mv /tmp/fwpatch/ssdt.dsl /tmp/fwpatch/ssdt1-modified.dsl iasl -ve /tmp/fwpatch/dsdt-modified.dsl iasl -ve /tmp/fwpatch/ssdt1-modified.dsl echo \"Installing patched tables\" mv /tmp/fwpatch/dsdt-modified.aml /tmp/efi/efi/OC/ACPI/ mv /tmp/fwpatch/ssdt1-modified.aml /tmp/efi/efi/OC/ACPI/ #echo \"Unmounting EFI partition\" #umount /tmp/efi echo_green \"Cleaning Up...\" rm -rf opencore-refind-rwl-generic.tar.gz iasl.gz patch.gz acpipatches.tar.gz rm -rf /usr/local/bin/iasl /usr/local/bin/patch /tmp/fwpatch Copy the output file from /tmp/efi to a USB drive for later use. The file structure of the bootloader directory should look like this:\n├── EFI │ ├── boot │ │ ├── BOOTx64.efi\t20.0 KiB (20,484) │ ├── OC │ │ ├── ACPI │ │ │ ├── dsdt-modified.aml\t16.1 KiB (16,466) │ │ │ └── ssdt1-modified.aml\t8.7 KiB (8,881) │ │ ├── config.plist │ │ ├── Drivers │ │ │ └── AcpiPatcher.efi\t24.0 KiB (24,576) │ │ └── OpenCore.efi │ ├── refind │ │ ├── icons │ │ ├── refind.conf │ │ ├── refind_x64.efi │ │ ├── themes I didn’t show files under icons, themes, vars, and tools since they are not important for the task.\nPrepare the Windows To Go USB Drive Unfortunately, internal eMMc and SD card are not possible to boot up EFI for Windows. It has to be running on a USB drive.\nDownload .iso image and Rufus on a Windows 10 machine Plug in a decent USB drive or portable SSD, Open Rufus, select the correct device and .iso image Choose Windows To Go under Image option and hit Start When WTG installation finishes, use what ever tool to access the EFI partition on the WTG drive. I use BOOTICE made by pauly, Physical disk - Destination Disk - WTG USB Drive (xxGB) - Parts Manage highlight the partition with NO NAME, ESP, FAT32, 2048, 260.0 MB and Assign Drive Letter - X: - OK Copy the bootloader files we’ve prepared to the EFI partition just mounted. When merging the efi folders, it would prompt for replacing BOOTx64.efi and yes for that. Now there are Boot,Microsoft,OC,refind inside EFI\\ Eject the WTG drive from Windows machine and plug it into the Chromebook. Power on and Select alternate bootloader → Tianocore/coreboot (CTRL+L)\" to boot into rEFInd When the rEFInd menu shows up, enter Boot Microsoft EFI boot from EFI System Partition and wait for the initialization. “ACPI_BIOS_ERROR” no longer interrupting and when the system reboots just repeat booting into the WTG drive Plug in a USB mouse may be helpful when interaction begins. It’s recommend to setup Windows without internet Windows Post-Installation Coolstar guide also provides a full set of drivers for ThinkPad C13. Sound card may works with both speaker and headphone depending on which Windows is installed.\nAfter tested a couple of versions of Windows10/11, I couldn’t get the touchscreen, touchpad and trackpoint working on any of them. This ruins my intention of using Windows on C13. Although at this point, it is able to play games with USB gaming gears.\nI still want to share some opinion on Windows since it’s not limited on a single hardware.\nTo test out different Windows versions running on a new device, Microsoft-Activation-Scripts can make things easier.\nFor me, LTSC 2021 (21H2) is the sweet spot between up-to-date and RAM efficiency among all current versions.\nHere is the final result:\nen-us_windows_10_enterprise_ltsc_2021_x64_dvd_d289cf96.iso Defualt RAM\tAvaliable 2771MB 30% C:\\ 17GB Used After OOSU10/Windows10Debloater \u0026 privacy.sexy RAM\tAvaliable 3088MB 24% C:\\ 9.5GB Used tiny10 21H2 x64 2209.iso Defualt RAM\tAvaliable 3088MB 24% C:\\ 8GB Used After OOSU10/Windows10Debloater \u0026 privacy.sexy \u0026 Debloat-Windows-10 RAM\tAvaliable 3196MB 21% C:\\ 8.2GB Used Although the mod version, tiny10 is generally not being trusted. It shows how much more we can get by modifying the image than post-install scripts.\nAlso, when considering privacy, people tend to think using Windows 10 is a joke. It’s half true.\nUsing OOSU10/Windows10Debloater can make things less worse. Additionally, using privacy.sexy can make it better. If we need to go further, Debloat-Windows-10 has a whole set of useful scripts to run or customize, for example, my favorite disable-services.ps1.\nEven not for privacy enhancement, just for better resource efficiency. These post-install scripts are worth to have—by reducing background CPU/Network/Disk activity, RAM/Storage consumption.\nYes, if use the aggressive rule set, it will break things up—until you notice it. Even if it really bothers you, most of the time it is reversible.\nFor more security enhancement, BitLocker/VeraCrypt and Windows-Optimize-Harden-Debloat are recommended.\nhenrypp’s simplewall + hostsmgr is a good alternative to Windows Firewall + SmartScreen which doesn’t cut off all those crazy traffic with Microsoft and its affiliate servers.\nhostsmgr generates a huge host file for blocking those unnecessary traffic as much as possible but it conflicts with DNS client service (dnscache). StevenBlack’s script solves the problem or by simply switching to NextDNS which is a modern alternative to the old hosts file methods.\nFor machines with 4GB of RAM and 32GB of storage in the modern days, we may need some cleanup methods from the old days but not with those outdated tools.\nAlso made by henrypp, memreduct can save a lot of memory that eating up by poorly made software. Use it wisely will definitely optimize the system performance. For storage, with bleachbit and WinDirStat would be enough to keep C13 running for years.\n",
  "wordCount" : "3621",
  "inLanguage": "en",
  "datePublished": "2024-02-16T00:00:00Z",
  "dateModified": "2024-02-16T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Jun"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://techshinobi.org/posts/tpc13/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Tech Shinobi",
    "logo": {
      "@type": "ImageObject",
      "url": "https://techshinobi.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://techshinobi.org/" accesskey="h" title="Tech Shinobi (Alt + H)">Tech Shinobi</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://techshinobi.org/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://techshinobi.org/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://techshinobi.org/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://techshinobi.org/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://techshinobi.org/">Home</a>&nbsp;»&nbsp;<a href="https://techshinobi.org/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Updating ThinkPad C13 Yoga
    </h1>
    <div class="post-meta"><span title='2024-02-16 00:00:00 +0000 UTC'>February 16, 2024</span>&nbsp;·&nbsp;17 min&nbsp;·&nbsp;Jun

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#2024-update" aria-label="2024 Update">2024 Update</a></li>
                <li>
                    <a href="#hardware" aria-label="Hardware">Hardware</a><ul>
                        
                <li>
                    <a href="#force-power-off" aria-label="Force Power-off">Force Power-off</a></li></ul>
                </li>
                <li>
                    <a href="#firmware" aria-label="Firmware">Firmware</a><ul>
                        
                <li>
                    <a href="#disable-cr50-hardware-write-protection-and-modify-bootloader" aria-label="Disable CR50 hardware write protection and modify bootloader">Disable CR50 hardware write protection and modify bootloader</a></li></ul>
                </li>
                <li>
                    <a href="#linux-on-thinkpad-c13-yoga" aria-label="Linux on ThinkPad C13 Yoga">Linux on ThinkPad C13 Yoga</a><ul>
                        
                <li>
                    <a href="#tails" aria-label="Tails">Tails</a></li>
                <li>
                    <a href="#depthboot" aria-label="Depthboot">Depthboot</a></li>
                <li>
                    <a href="#mate-desktop-environment" aria-label="MATE Desktop Environment">MATE Desktop Environment</a><ul>
                        
                <li>
                    <a href="#fix-twice-login-problem" aria-label="Fix twice login problem">Fix twice login problem</a></li>
                <li>
                    <a href="#remap-missing-keys-with-keyd" aria-label="Remap missing keys with keyd">Remap missing keys with keyd</a></li>
                <li>
                    <a href="#optimize-liunx" aria-label="Optimize Liunx">Optimize Liunx</a></li>
                <li>
                    <a href="#arkenfox-the-easy-way" aria-label="Arkenfox the easy way">Arkenfox the easy way</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#windows-on-thinkpad-c13-yoga" aria-label="Windows on ThinkPad C13 Yoga">Windows on ThinkPad C13 Yoga</a><ul>
                        
                <li>
                    <a href="#prepare-the-bootloader-files" aria-label="Prepare the bootloader files">Prepare the bootloader files</a></li>
                <li>
                    <a href="#prepare-the-windows-to-go-usb-drive" aria-label="Prepare the Windows To Go USB Drive">Prepare the Windows To Go USB Drive</a></li>
                <li>
                    <a href="#windows-post-installation" aria-label="Windows Post-Installation">Windows Post-Installation</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="2024-update">2024 Update<a hidden class="anchor" aria-hidden="true" href="#2024-update">#</a></h2>
<p><a href="https://mrchromebox.tech/#home">MrChromebox.tech</a> had a major update a few month ago, so I decide to move on as well.</p>
<p>But before that, use <a href="https://clonezilla.org/">Clonezilla</a> or <code>rsync -aHAXS</code> to back up the 32 GB emmc first.</p>
<p>Run in terminal, install &ldquo;Full UEFI Firmware&rdquo;
<code>cd; curl -LO mrchromebox.tech/firmware-util.sh &amp;&amp; sudo bash firmware-util.sh</code></p>
<p>After reboot, a full version of  <a href="http://www.coreboot.org/">coreboot</a> is installed, by replacing the previous <a href="http://www.seabios.org/">SeaBIOS</a> which is partial and limited.</p>
<p>This makes this laptop now with a free firmware. A free GNU/Linux distro is needed to be reinstalled.</p>
<p>When done backing up the old OS, download preferred distro and boot it from an USB drive.</p>
<p>Prepare another USB drive for <code>/boot</code> partition, since UEFI doesn&rsquo;t work with the internal eMMc storage. This boot drive is necessary for every power-on or reboot. Choose a low-profile one so that is appropriate to be semi-permanent.</p>
<p>While installation (custom), make the <code>/boot</code> and <code>/boot/efi</code> mounting points on the boot drive (sda), and everything else, like <code>/</code>, <code>/home</code> and <code>swap</code> on the internal storage (mmcblk0).</p>
<p>This UEFI boot workaround should also work with Windows system. Not only due to the reason I stated <a href="https://techshinobi.org/posts/tpc13/#windows-post-installation">before</a>, but also I really like the freeness of this laptop.</p>
<p>It is suggested to use a small-size (mine is 4GB), slow-speed but reliable USB drive for boot drive. Use some tools like <a href="https://rmprepusb.com/">RMPrepUSB</a> or <a href="http://bbs.wuyou.net/forum.php?mod=viewthread&amp;tid=330493">MBROSTool</a> to test a USB drive and make backup boot drives with Clonezilla.</p>
<p>In the end, use <code>rsync</code>, Clonezilla or both to restore the old system folders like <code>/home</code>. There are extra files such as <code>/etc/keyd/default.conf</code> and a few software from <code>/usr/share/</code> and  <code>/opt/*</code>.  After the new system booted, reinstall keyd and other softwares as needed. The only broken thing was my custom theme for mate. Changing to another theme is a quick fix.</p>
<p>After this firmware upgrade, the <a href="https://techshinobi.org/posts/tpc13/#depthboot">sound card problem</a> is fixed and the driver is now fully funtional out of the box.</p>
<p>Below is the original content dated at 2022-11-09.</p>
<hr>
<p>Recently, I got a new ThinkPad which took Lenovo over 2 month preparing for shipping. For the price, it worth waiting. This is the first Chromebook I&rsquo;ve ever had, so I did quite a lot experiments with it.</p>
<h2 id="hardware">Hardware<a hidden class="anchor" aria-hidden="true" href="#hardware">#</a></h2>
<p>The model is C13 Yoga Chromebook (MORPHIUS) with AMD Athlon gold 3015c (Picasso) 4GB RAM and 32GB eMMc storage.</p>
<p>There are multiple variations in C13 models and mine is the lowest-end of them. It is the cheapest ThinkPad I&rsquo;ve ever seen, even cheaper than my old one (Sandy Bridge, bought used on 2016).</p>
<p>The stylus pen is thinner and the touchscreen isn&rsquo;t compatible with my old stylus pen although they feel very similar on hand.</p>
<h3 id="force-power-off">Force Power-off<a hidden class="anchor" aria-hidden="true" href="#force-power-off">#</a></h3>
<p>There are a few techniques from the official documents. I tried and none of them works for a serious freeze like kernel panic. Therefore, I physically disabled the built-in battery for convenience. Fortunately, it&rsquo;s fairly easy to do without leaving a scratch or tearing up any label.</p>
<ul>
<li>Hard and doesn&rsquo;t work: press <code>Refresh ⟳</code> together with the <code>Power</code> button for about five seconds, and at the same time detach the ac power adapter from the Chromebook</li>
<li>Works only for normal freeze: disconnect all power sources. Press and hold the power button for about seven seconds</li>
</ul>
<h2 id="firmware">Firmware<a hidden class="anchor" aria-hidden="true" href="#firmware">#</a></h2>
<h3 id="disable-cr50-hardware-write-protection-and-modify-bootloader">Disable CR50 hardware write protection and modify bootloader<a hidden class="anchor" aria-hidden="true" href="#disable-cr50-hardware-write-protection-and-modify-bootloader">#</a></h3>
<p>I followed instructions from <a href="https://coolstar.org/chromebook/windows-install.html">coolstar</a>, <a href="https://github.com/pl-luk/linuxbook">pl-luk</a>, and <a href="https://mrchromebox.tech/">Mrchromebox</a> to replace Tianocore with coreboot + SeaBIOS.</p>
<ol>
<li>Enter Recovery Mode with  <code>ESC + ⟳ + Power</code>: press/hold ESC and Refresh, then press Power for ~1s</li>
<li><code>CTRL+D</code> to switch to Developer Mode and confirm</li>
<li><code>CTRL+D</code> again to wipe userdata for Developer Mode</li>
<li>Connect WiFi and select <code>Browse as a Guest</code></li>
<li>Use <code>CTRL+ALT+T</code> in Chrome to Open the CCD</li>
<li>Run <code>shell</code> in the Crosh shell to switch shell</li>
<li>Run <code>sudo crossystem dev_boot_altfw=1</code> and <code>sudo crossystem dev_boot_usb=1</code> and <code>sudo crossystem dev_boot_signed_only=0; sync</code> to enable extra boot entries</li>
<li>Run <code>sudo flashrom --wp-disable</code> and <code>sudo flashrom --wp-range=0,0</code> to disable write protection</li>
<li>Run MrChromebox&rsquo;s script: <code>cd; curl -LO mrchromebox.tech/firmware-util.sh &amp;&amp; sudo bash firmware-util.sh</code></li>
<li>Reboot and either select <code>Select alternate bootloader → Tianocore/coreboot (CTRL+L)&quot;</code> or <code>Boot from external Disk (CTRL+U)</code> as needed</li>
</ol>
<h2 id="linux-on-thinkpad-c13-yoga">Linux on ThinkPad C13 Yoga<a hidden class="anchor" aria-hidden="true" href="#linux-on-thinkpad-c13-yoga">#</a></h2>
<h3 id="tails">Tails<a hidden class="anchor" aria-hidden="true" href="#tails">#</a></h3>
<p>Thanks to folks from r/chrultrabook. I found adding <code>iommu=pt</code> to the Grab2 menu options fixed the booting problem for many Live CD distros.
Here are more parameters maybe useful:</p>
<pre tabindex="0"><code>video=eDP-1:1920x1080-32@60 iommu=pt mem_encrypt=off amdgpu.ras_enable=0 amdgpu.audio=0
</code></pre><h3 id="depthboot">Depthboot<a hidden class="anchor" aria-hidden="true" href="#depthboot">#</a></h3>
<p>I&rsquo;ve tried the prebuild <a href="https://github.com/eupnea-linux/eupnea-os/releases">EupneaOS</a> image and didn&rsquo;t like its flavor. Therefore, I followed <a href="https://eupnea-linux.github.io/docs.html#/setup-pages/build-instructions">Depthboot instructions</a> to build from scratch.</p>
<ol>
<li>On a Linux machine, insert a USB drive and run <code>git clone --depth=1 https://github.com/eupnea-linux/depthboot-builder; cd depthboot-builder; ./main.py</code>  inside a terminal</li>
<li>Choose a flavor, select the USB drive to flash directly, for me its <code>sdb</code>, and it takes a few mins to finish</li>
<li>Put the depthboot USB drive into the Chromebook and hit <code>Ctrl+U (Boot from external disk)</code> at the bootloader</li>
<li>Boot into the newly created Linux and test everything out. In my case, only the sound card and suspend has issue</li>
<li>Connect to internet, then open a terminal, update and run <code>setup-audio</code> to fix the sound card driver (acp3xalc5682m98357)</li>
<li>run <code>install-to-internal</code> to start installation. It will use <code>/dev/mmcblk1</code> which means wiping the entire 32GB eMMc/HDD without preserving Chrome OS partition</li>
<li>When installation finishes, reboot and use <code>Ctrl+D (Boot from internal disk)</code> to boot into the new system</li>
</ol>
<p>Depthboot created Linux distros runs pretty well on my C13. Suspend doesn&rsquo;t suppose to work on this hardware and I don&rsquo;t really need it. The sound card is far more problematic because acp3xalc5682m98357 (<a href="https://cb-linux.github.io/breath/docs.html#/limitations?id=no-da7219_max98357a-support">Maxim 98357a</a>) is a tough one to work with.</p>
<p>Thanks to <a href="https://github.com/eupnea-linux/audio-scripts">eupnea-audio-script</a>. With kernel version 5.10.131, I was able to get the built-in speakers working but not for the headphone port. Here&rsquo;s more test results:</p>
<ul>
<li>Semi-functional sound card under Fedora 37, Pop!_OS 22.04 LTS and Ubuntu 22.10—speakers are fixed but not for the headphone port</li>
<li>Not working sound card under Ubuntu LTS 22.04 and Arch—the script didn&rsquo;t fix anything</li>
</ul>
<p>Workarounds are plenty, for example, using Bluetooth headphones or buying a cheap small USB sound card like C-Media ones that can plug n play.</p>
<h3 id="mate-desktop-environment">MATE Desktop Environment<a hidden class="anchor" aria-hidden="true" href="#mate-desktop-environment">#</a></h3>
<p><a href="https://cb-linux.github.io/breath/docs.html#/?id=running-breath">Breath</a> used to provide MATE as one of the desktop options. Depthboot added Pop!_OS which is very nice but removed my favorite DE from all distros.</p>
<p>MATE consumes much less resources while provides a decent UX/UI. Because of that, it&rsquo;s superior than any other desktop options for my C13. Most important, GNOME 2 was my first daily driver linux desktop.</p>
<ol>
<li>Use Depthboot <code>main.py</code> script to create a <code>cli</code>(no desktop) version of <code>fedora</code>, ubuntu cli had minor booting issue</li>
<li>Boot into the Dephboot drive on C13 and use <code>nmtui</code> → <code>Active a connection</code> to connect WiFi</li>
<li>Run <code>install-to-internal</code> and <code>sudo reboot</code>. Boot into internal disk and log into fedora cli</li>
<li>To install MATE, run <code>sudo dnf -y group install &quot;MATE-Desktop&quot;</code> or for less package <code>sudo dnf -y install @mate-desktop</code>. In case of installing as secondary DE, add <code>--allowerasing</code> to resolve conflicts</li>
<li>Run <code>echo &quot;exec /usr/bin/mate-session&quot; &gt;&gt; ~/.xinitrc</code>and <code>startx</code> to launch MATE</li>
</ol>
<h4 id="fix-twice-login-problem">Fix twice login problem<a hidden class="anchor" aria-hidden="true" href="#fix-twice-login-problem">#</a></h4>
<p>It happens to LightDM, so both MATE and Xfce can be affected. Run <a href="https://forums.fedoraforum.org/showthread.php?319968-Need-to-login-twice-using-LightDM-and-Xfce">these lines</a> to switch from lightdm to sddm</p>
<pre tabindex="0"><code>dnf install sddm
systemctl disable lightdm
systemctl enable sddm
reboot
</code></pre><p>Use <code>setup-audio</code> to fix the sound card. After reboot, go to <code>Sound Preferences/PulseAudio</code> switch <code>Profile</code> into <code>Pro Audio</code>. Xfce and MATE doesn&rsquo;t support volume function keys by default, go to <code>System Settings - Hardware - Keyboard - Layouts</code> switch <code>Keyboard model</code> into <code>Google - Chromebook</code> to enable all function keys.</p>
<h4 id="remap-missing-keys-with-keyd">Remap missing keys with keyd<a hidden class="anchor" aria-hidden="true" href="#remap-missing-keys-with-keyd">#</a></h4>
<p>However, I switched it back to <code>Generic - Generic 104-key PC</code> since I need a normal keyboard experience for blogging, coding and SSH.</p>
<p>Install <a href="https://github.com/rvaiya/keyd">keyd</a></p>
<pre tabindex="0"><code>git clone https://github.com/rvaiya/keyd
cd keyd
make &amp;&amp; sudo make install
modprobe uinput
chmod a+r+w /dev/uinput
sudo systemctl enable keyd &amp;&amp; sudo systemctl start keyd
</code></pre><p><a href="https://github.com/omakoto/keyremapper-rs#prerequisite">Keep uinput loaded</a> after reboot for keyd</p>
<pre tabindex="0"><code>#Add self to the input and uinput groups
sudo usermod -aG input $USERNAME
sudo groupadd uinput
sudo usermod -aG uinput $USERNAME

#Create auto load files for uinput module
echo &#39;KERNEL==&#34;uinput&#34;, SUBSYSTEM==&#34;misc&#34;, MODE=&#34;0660&#34;, GROUP=&#34;uinput&#34;&#39; | sudo tee /etc/udev/rules.d/90-uinput.rules
echo uinput | sudo tee /etc/modules-load.d/uinput.conf
</code></pre><p>Run <code>sudo keyd -m</code> to read key press; create config file  <code>sudo pluma /etc/keyd/default.conf</code>  and save it with desired code</p>
<pre tabindex="0"><code>[ids]

*

[main]
# Remaps Tools/Lock key to Del
f13 = delete
# Remaps Search/meta/magnifier to Caps Lock
leftmeta = capslock
# Remaps right Ctrl key to Win/Meta/Super/Mod4
#rightcontrol = leftmeta
# Recovers missing F11, F12, 
[control]
f9 = f11
f10 = f12


[main]
# Use left Alt as Fn/ISO_Level3_Shift key
[alt]
# Recovers Home/End, PgUp/PgDn, PrtScr
left = home
right = end
up = pageup
down = pagedown
f5 = sysrq
# Remaps Function keys
f6 = brightnessdown
f7 = brightnessup
f8 = mute
f9 = volumedown
f10 = volumeup

[main]
# Use right Alt as Fn/ISO_Level3_Shift key
[altgr]
# Recovers Home/End, PgUp/PgDn, PrtScr
left = home
right = end
up = pageup
down = pagedown
f5 = sysrq
# Remaps Function keys
f6 = brightnessdown
f7 = brightnessup
f8 = mute
f9 = volumedown
f10 = volumeup

# More examples: https://github.com/rvaiya/keyd/blob/master/docs/keyd.scdoc
</code></pre><p>Run <code>sudo keyd reload</code> to see result</p>
<p>My layout is based on <a href="https://github.com/coolstar/driverinstallers/blob/master/chromebookremap/ChromebookRemap.ahk">coolstarorg&rsquo;s chromebookremap.ahk</a> by using both sides of ALT as the Fn key instead of Ctrl.
It brings back all missing keys such as F11/F12, volume controls and the ability to Ctrl+Alt+Del. Now we can have a fully functional keyboard on a Chromebook.</p>
<h4 id="optimize-liunx">Optimize Liunx<a hidden class="anchor" aria-hidden="true" href="#optimize-liunx">#</a></h4>
<p>For my C13, I think the cost of <a href="https://github.com/teejee2008/timeshift">timeshift</a> is more than what I can get from it. I&rsquo;d rather use traditional backup methods like <a href="https://clonezilla.org/">clonezilla</a> or simply <a href="https://wiki.archlinux.org/title/Full_system_backup_with_tar">tar</a> occasionally. Always make backups before doing anything funny.</p>
<ol>
<li>
<p>Go to <code>System Settings - Hardware - Keyboard Shortcuts</code> or run <code>dconf-editor</code> to setup hotkeys. I rebind some combinations from Meta/Super to left Alt</p>
</li>
<li>
<p>Change font rendering DPI from 96 to 130; Find some cohesive <a href="https://www.mate-look.org/browse/">dark theme</a> that follows ThinkPad&rsquo;s design language; Disable mouse acceleration and touchpad;</p>
<p>I modified <a href="https://techshinobi.org/posts/tweakingmouse/#acceleration">this script</a> to disable hires scrolling and mouse acceleration at same shot. <code>sudo dnf install xinput</code> first, save desired code in a .sh file, run <code>chmod +x script.sh</code> from terminal to ensure its permission and add it into <code>System - Personal - Preferences - Startup Applications</code>.</p>
</li>
</ol>
<pre tabindex="0"><code>#!/bin/sh

device=&#34;TPPS/2 Elan TrackPoint&#34;

if xinput list --id-only &#34;${device}&#34; &gt; /dev/null 2&gt;&amp;1; then
    xinput --set-prop &#34;${device}&#34; &#39;libinput Accel Profile Enabled&#39; 0, 1
    xinput --set-prop &#34;${device}&#34; &#39;libinput Accel Speed&#39; 0
	xinput --set-prop &#34;${device}&#34; &#39;libinput Scrolling Pixel Distance&#39; 40 #Fastest to slowest 10-50
	xinput --set-prop &#34;${device}&#34; &#39;libinput High Resolution Wheel Scroll Enabled&#39; 0
    notify-send &#34;Mouse settings applied&#34;
else
    echo &#34;Unable to find device ${device}&#34; &gt;&amp;2
    exit 1
fi
</code></pre><ol start="3">
<li>Disabe useless autostarts (most of them) from <code>System - Personal - Startup Applications - Show hidden</code> or by using <a href="https://github.com/oguzhaninan/Stacer/releases">Stacer</a> with root privilege; Remove bloatware like flatpak and <a href="https://robbinespu.gitlab.io/posts/disable-abrt-fedora/">abrt bug report services</a> from terminal</li>
</ol>
<pre tabindex="0"><code>sudo dnf -y remove xdg-desktop-portal
sudo systemctl -t service | grep abrt
sudo systemctl stop abrt-journal-core.service
sudo systemctl disable abrt-journal-core.service
sudo systemctl stop abrt-oops.service
sudo systemctl disable abrt-oops.service
sudo systemctl stop abrt-xorg.service
sudo systemctl disable abrt-xorg.service
sudo systemctl stop abrtd.service
sudo systemctl disable abrtd.service
</code></pre><p>At this point, on idle the system&rsquo;s memory/CPU usage should be like 700-800MB/1-2%. Under normal load surfing with 5-6 tabs while playing FreeTube with 720p video, memory/CPU is around 2.6GB-2.8GB/20-50%. No lag or freeze what so ever.</p>
<p>To be more efficient, use some not-so-memory-hungry web browsers such as <a href="https://src.fedoraproject.org/rpms/midori">midori</a>, <a href="https://www.palemoon.org/">Pale Moon</a> and <a href="https://otter-browser.org/">Otter</a>. Although it is totally fine to stick with <a href="https://librewolf.net/">LibreWolf</a> or <a href="https://forums.debian.net/viewtopic.php?t=151683">Firefox+Arkenfox</a> running full loads of extensions.</p>
<h4 id="arkenfox-the-easy-way">Arkenfox the easy way<a hidden class="anchor" aria-hidden="true" href="#arkenfox-the-easy-way">#</a></h4>
<p>For <a href="https://spyware.neocities.org/guides/firefox.html">applying Arkenfox on stock Firefox</a></p>
<ol>
<li>
<p>Go to <code>about:support</code> and open <code>Profile Directory</code></p>
</li>
<li>
<p>Close Firefox and backup the entire profile dir. Download the <a href="https://raw.githubusercontent.com/arkenfox/user.js/master/user.js">user.js</a> and <a href="https://raw.githubusercontent.com/arkenfox/user.js/master/prefsCleaner.sh">prefsCleaner.sh</a> inside the profile dir along with <code>prefs.js</code></p>
</li>
<li>
<p>Run these lines and restart Firefox</p>
</li>
</ol>
<pre tabindex="0"><code>cd /home/username/.mozilla/firefox/s0m3th1ng.default/
wget https://raw.githubusercontent.com/arkenfox/user.js/master/user.js https://raw.githubusercontent.com/arkenfox/user.js/master/prefsCleaner.sh
chmod +x prefsCleaner.sh user.js
./prefsCleaner.sh
</code></pre><ol start="4">
<li>If need persistent log in, modify <code>user.js</code> with followings</li>
</ol>
<pre tabindex="0"><code>user_pref(&#34;privacy.clearOnShutdown.cookies&#34;, false); 

user_pref(&#34;privacy.clearOnShutdown.offlineApps&#34;, false);

user_pref(&#34;browser.sessionstore.privacy_level&#34;, 0);

user_pref(&#34;browser.startup.page&#34;, 3);

user_pref(&#34;places.history.enabled&#34;, true);

user_pref(&#34;privacy.sanitize.sanitizeOnShutdown&#34;, false);

user_pref(&#34;network.cookie.lifetimePolicy&#34;, 2);
</code></pre><h2 id="windows-on-thinkpad-c13-yoga">Windows on ThinkPad C13 Yoga<a hidden class="anchor" aria-hidden="true" href="#windows-on-thinkpad-c13-yoga">#</a></h2>
<p>Although coolstar has C13 with AMD 3015ce in <a href="https://coolstar.org/chromebook/windows-install.html">its guide</a>, it is not for the lowest end variation. If I run the script, it would say &ldquo;Detected eMMC&rdquo; and &ldquo;UEFI only supports NVMe SSDs currently&rdquo;.</p>
<p>Without the bootloader files created by <a href="https://coolstar.org/chromebook/windows-rwl/install-rwl.sh">that script</a>, I can&rsquo;t pass the &ldquo;ACPI_BIOS_ERROR&rdquo; when booting up ANY version of Windows. Therefore, I decided to run the script code manually for the bootloader files.</p>
<h3 id="prepare-the-bootloader-files">Prepare the bootloader files<a hidden class="anchor" aria-hidden="true" href="#prepare-the-bootloader-files">#</a></h3>
<p>On the Chromebook, boot into Linux either from internal disk or USB. Save these cut-out code in a .sh file and run  <code>sudo ./newscript.sh</code> in terminal</p>
<pre tabindex="0"><code>echo &#34;Downloading OpenCore + rEFInd&#34;
curl -L -O https://coolstar.org/chromebook/windows-rwl/opencore-refind-rwl-generic.tar.gz
mkdir -p /tmp/efi/efi/boot

echo_green &#34;Installing OpenCore + rEFInd&#34;
tar xf opencore-refind-rwl-generic.tar.gz -C /tmp/efi/efi/boot 
mv /tmp/efi/efi/boot/OC /tmp/efi/efi/OC
mv /tmp/efi/efi/boot/refind /tmp/efi/efi/refind

echo &#34;Downloading Tools..&#34;
curl -L -O https://coolstar.org/chromebook/windows-rwl/iasl.gz
curl -L -O https://coolstar.org/chromebook/windows-rwl/patch.gz

gzip -d iasl.gz
gzip -d patch.gz

rm -rf /usr/local/bin/iasl /usr/local/bin/patch
mkdir -p /usr/local/bin
mv iasl /usr/local/bin/
mv patch /usr/local/bin
chmod +x /usr/local/bin/iasl
chmod +x /usr/local/bin/patch

echo &#34;Dumping System ACPI tables&#34;
mkdir -p /tmp/fwpatch
cat /sys/firmware/acpi/tables/DSDT &gt; /tmp/fwpatch/dsdt.aml

if grep -q COREBOOT /sys/firmware/acpi/tables/SSDT1; then
    echo &#34;Found COREBOOT SSDT1&#34;
    cat /sys/firmware/acpi/tables/SSDT1 &gt; /tmp/fwpatch/ssdt.aml
fi

if grep -q COREBOOT /sys/firmware/acpi/tables/SSDT2; then
    echo &#34;Found COREBOOT SSDT2&#34;
    cat /sys/firmware/acpi/tables/SSDT2 &gt; /tmp/fwpatch/ssdt.aml
fi

echo &#34;Disassembling ACPI tables&#34;
iasl -d /tmp/fwpatch/dsdt.aml /tmp/fwpatch/ssdt.aml

echo &#34;Downloading Patches&#34;
curl -L -O https://coolstar.org/chromebook/windows-rwl/acpipatches.tar.gz
tar xf acpipatches.tar.gz -C /tmp/fwpatch

if $(true); then
    echo &#34;Applying Patches&#34;

    pushd /tmp/fwpatch #Enter Firmware patch stage

    echo &#34;Applying DSDT Patch (Zen2 Chrome EC BSOD Fix)&#34;
    patch -s -F 3 -i patches/zen2-crec-fix.patch dsdt.dsl

    echo &#34;Applying DSDT Patch (Zen2 GPIO Fix)&#34;
    patch -s -F 3 -i patches/zen2-gpio.patch dsdt.dsl

    echo &#34;Applying DSDT Patch (Zen2 UART Fix)&#34;
    patch -s -F 3 -i patches/zen2-uart.patch dsdt.dsl

    echo &#34;Applying DSDT Patch (Zen2 Remove MISC)&#34;
    patch -s -F 3 -i patches/zen2-nomisc.patch dsdt.dsl

    echo &#34;Applying DSDT Patch (Zen2 Remove AAHB)&#34;
    patch -s -F 3 -i patches/zen2-noaahb.patch dsdt.dsl
    
    if grep -q GOOG0002 dsdt.dsl; then
        echo &#34;Applying DSDT Patch (Zen2 Keyboard Backlight)&#34;
        patch -s -F 3 -i patches/zen2-kblt-scope.patch dsdt.dsl
    fi

    if grep -q GOOG0015 dsdt.dsl; then
        echo &#34;Applying DSDT Patch (Morphius No Trackpoint)&#34;
        patch -s -F 7 -i patches/morphius-no-trackpoint.patch dsdt.dsl
    fi

    if grep -q GOOG0006 dsdt.dsl; then
        echo &#34;Applying DSDT Patch (Zen2 Tablet Mode)&#34;
        patch -s -F 5 -i patches/zen2-tabletmode.patch dsdt.dsl
    fi

    if grep -q DPTC ssdt.dsl; then
        echo &#34;Applying SSDT Patch (Syntax Fix)&#34;
        patch -s -F 3 -i patches/morphius-syntax-fix.patch ssdt.dsl
    fi

    if grep -q RTD2141B ssdt.dsl; then
        echo &#34;Applying SSDT Patch (Remove MST HUB)&#34;
        patch -s -F 3 -i patches/nomst.patch ssdt.dsl
    fi

    if grep -q AMDI5682 ssdt.dsl; then
        echo &#34;Applying SSDT Patch (Remove AMDI5682)&#34;
        patch -s -F 5 -i patches/zen2-nomach.patch ssdt.dsl
    fi

    if grep -q AMDI1015 ssdt.dsl; then
        echo &#34;Applying SSDT Patch (Remove AMDI1015)&#34;
        patch -s -F 5 -i patches/zen2-nomach1015.patch ssdt.dsl
    fi

    if grep -q &#34;Fingerprint Reader&#34; ssdt.dsl; then
        echo &#34;Applying SSDT Patch (Fingerprint Fix)&#34;
        patch -s -F 3 -i patches/fingerprintfix.patch ssdt.dsl
    fi

    if grep -q ELAN0000 ssdt.dsl; then
        if [ &#34;$isElanPad&#34; = true ]; then
            echo &#34;Applying SSDT Patch (Elan Touchpad)&#34;
            patch -s -F 3 -i patches/elantp.patch ssdt.dsl
        else
            echo &#34;Applying SSDT Patch (No Elan Touchpad)&#34;
            patch -s -F 3 -i patches/noelantp.patch ssdt.dsl
        fi
    fi

    if grep -q &#34;Synaptics Touchpad&#34; ssdt.dsl; then
        if [ &#34;$isSynapticsPad&#34; = true ]; then
            echo &#34;Applying SSDT Patch (Synaptics Touchpad)&#34;
            patch -s -F 3 -i patches/synatp.patch ssdt.dsl
        else
            echo &#34;Applying SSDT Patch (No Synaptics Touchpad)&#34;
            patch -s -F 3 -i patches/nosynatp.patch ssdt.dsl
        fi
    fi

    if grep -q RAYD0001 ssdt.dsl; then
        if [ &#34;$isRaydiumTouch&#34; = true ]; then
            echoerr &#34;Warning: Raydium Touchscreen is currently unsupported&#34;
        fi
        echo &#34;Applying SSDT Patch (No Raydium Touchscreen)&#34;
        patch -s -F 3 -i patches/noraydiumts.patch ssdt.dsl
    fi

    if grep -q ELAN0001 ssdt.dsl; then
        if [ &#34;$isElanTouch&#34; = true ]; then
            echo &#34;Applying SSDT Patch (Elan Touchscreen)&#34;
            patch -s -F 3 -i patches/elants.patch ssdt.dsl
        else
            echo &#34;Applying SSDT Patch (No Elan Touchscreen)&#34;
            patch -s -F 3 -i patches/noelants.patch ssdt.dsl
        fi
    fi

    if grep -q ELAN9008 ssdt.dsl; then
        if [ &#34;$isElanHIDTouch&#34; = true ]; then
            echo &#34;No Patch required (Elan HID Touchscreen)&#34;
        else
            echo &#34;Applying SSDT Patch (No Elan HID Touchscreen)&#34;
            patch -s -F 6 -i patches/noelan9008ts.patch ssdt.dsl
        fi
    fi

    if grep -q GTCH7503 ssdt.dsl; then
        if [ &#34;$isG2Touch&#34; = true ]; then
            echo &#34;No Patch required (G2 Touchscreen)&#34;
        else
            echo &#34;Applying SSDT Patch (No G2 Touchscreen)&#34;
            patch -s -F 3 -i patches/nog2touch.patch ssdt.dsl
        fi
    fi

    if grep -q GDIX0000 ssdt.dsl; then
        if [ &#34;$isGdixTouch&#34; = true ]; then
            echo &#34;No Patch required (GDIX Touchscreen)&#34;
        else
            echo &#34;Applying SSDT Patch (No GDIX Touchscreen)&#34;
            patch -s -F 3 -i patches/nogdixts.patch ssdt.dsl
        fi
    fi

    if grep -q 10EC1015 ssdt.dsl; then
        echo &#34;Applying SSDT Patch (Vilboz Duplicate I2C)&#34;
        patch -s -F 5 -i patches/vilboz-nodupi2c.patch ssdt.dsl
        sed -i &#39;s/TUN1/TUN0/g&#39; ssdt.dsl
    fi

    popd
fi

echo &#34;Compiling ACPI tables&#34;
mv /tmp/fwpatch/dsdt.dsl /tmp/fwpatch/dsdt-modified.dsl
mv /tmp/fwpatch/ssdt.dsl /tmp/fwpatch/ssdt1-modified.dsl
iasl -ve /tmp/fwpatch/dsdt-modified.dsl
iasl -ve /tmp/fwpatch/ssdt1-modified.dsl

echo &#34;Installing patched tables&#34;
mv /tmp/fwpatch/dsdt-modified.aml /tmp/efi/efi/OC/ACPI/
mv /tmp/fwpatch/ssdt1-modified.aml /tmp/efi/efi/OC/ACPI/

#echo &#34;Unmounting EFI partition&#34;
#umount /tmp/efi

echo_green &#34;Cleaning Up...&#34;
rm -rf opencore-refind-rwl-generic.tar.gz iasl.gz patch.gz acpipatches.tar.gz
rm -rf /usr/local/bin/iasl /usr/local/bin/patch /tmp/fwpatch
</code></pre><p>Copy the output file from /tmp/efi to a USB drive for later use.
The file structure of the bootloader directory should look like this:</p>
<pre tabindex="0"><code>├── EFI
│   ├── boot
│   │   ├── BOOTx64.efi	20.0 KiB (20,484)
│   ├── OC
│   │   ├── ACPI
│   │   │   ├── dsdt-modified.aml	16.1 KiB (16,466)
│   │   │   └── ssdt1-modified.aml	8.7 KiB (8,881)
│   │   ├── config.plist
│   │   ├── Drivers
│   │   │   └── AcpiPatcher.efi	24.0 KiB (24,576)
│   │   └── OpenCore.efi
│   ├── refind
│   │   ├── icons
│   │   ├── refind.conf
│   │   ├── refind_x64.efi
│   │   ├── themes
</code></pre><p>I didn&rsquo;t show files under icons, themes, vars, and tools since they are not important for the task.</p>
<h3 id="prepare-the-windows-to-go-usb-drive">Prepare the Windows To Go USB Drive<a hidden class="anchor" aria-hidden="true" href="#prepare-the-windows-to-go-usb-drive">#</a></h3>
<p>Unfortunately, internal eMMc and SD card are not possible to boot up EFI for Windows. It has to be running on a USB drive.</p>
<ol>
<li>Download .iso image and <a href="https://rufus.ie/">Rufus</a> on a Windows 10 machine</li>
<li>Plug in a decent USB drive or portable SSD, Open Rufus, select the correct device and .iso image</li>
<li>Choose <code>Windows To Go</code> under <code>Image option</code> and hit <code>Start</code></li>
<li>When WTG installation finishes, use what ever tool to access the EFI partition on the WTG drive. I use <a href="https://www.majorgeeks.com/files/details/bootice_64_bit.html">BOOTICE</a> made by <a href="http://bbs.c3.wuyou.net/forum.php?mod=viewthread&amp;tid=57675&amp;extra=page%3D1">pauly</a>, <code>Physical disk - Destination Disk - WTG USB Drive (xxGB) - Parts Manage</code> highlight the partition with <code>NO NAME, ESP, FAT32, 2048, 260.0 MB</code> and <code>Assign Drive Letter - X: - OK</code></li>
<li>Copy the bootloader files we&rsquo;ve prepared to the EFI partition just mounted. When merging the efi folders, it would prompt for replacing <code>BOOTx64.efi</code> and yes for that. Now there are <code>Boot,Microsoft,OC,refind</code> inside EFI\</li>
<li>Eject the WTG drive from Windows machine and plug it into the Chromebook. Power on and  <code>Select alternate bootloader → Tianocore/coreboot (CTRL+L)&quot;</code> to boot into rEFInd</li>
<li>When the rEFInd menu shows up, enter <code>Boot Microsoft EFI boot from EFI System Partition</code> and wait for the initialization. &ldquo;ACPI_BIOS_ERROR&rdquo; no longer interrupting and when the system reboots just repeat booting into the WTG drive</li>
<li>Plug in a USB mouse may be helpful when interaction begins. It&rsquo;s recommend to setup Windows without internet</li>
</ol>
<h3 id="windows-post-installation">Windows Post-Installation<a hidden class="anchor" aria-hidden="true" href="#windows-post-installation">#</a></h3>
<p><a href="https://coolstar.org/chromebook/windows-install.html">Coolstar guide</a> also provides a full set of <a href="https://github.com/coolstar/driverinstallers">drivers</a> for ThinkPad C13. Sound card may works with both speaker and headphone depending on which Windows is installed.</p>
<p>After tested a couple of versions of Windows10/11, I couldn&rsquo;t get the touchscreen, touchpad and trackpoint working on any of them. This ruins my intention of using Windows on C13. Although at this point, it is able to play games with USB gaming gears.</p>
<p>I still want to share some opinion on Windows since it&rsquo;s not limited on a single hardware.</p>
<p>To test out different Windows versions running on a new device, <a href="https://github.com/massgravel/Microsoft-Activation-Scripts">Microsoft-Activation-Scripts</a> can make things easier.</p>
<p>For me, <code>LTSC 2021 (21H2)</code> is the sweet spot between up-to-date and RAM efficiency among all current versions.</p>
<p>Here is the final result:</p>
<pre tabindex="0"><code>en-us_windows_10_enterprise_ltsc_2021_x64_dvd_d289cf96.iso

	Defualt
	RAM	Avaliable 2771MB 30%
	C:\ 17GB Used

	After OOSU10/Windows10Debloater &amp; privacy.sexy
	RAM	Avaliable 3088MB 24%
	C:\ 9.5GB Used

tiny10 21H2 x64 2209.iso

	Defualt
	RAM	Avaliable 3088MB 24%
	C:\ 8GB Used

	After OOSU10/Windows10Debloater &amp; privacy.sexy &amp; Debloat-Windows-10
	RAM	Avaliable 3196MB 21%
	C:\ 8.2GB Used
</code></pre><p>Although the mod version, tiny10 is generally not being trusted. It shows how much more we can get by modifying the image than post-install scripts.</p>
<p>Also, when considering privacy, people tend to think using Windows 10 is a joke. It&rsquo;s half true.</p>
<p>Using <a href="https://www.oo-software.com/en/shutup10">OOSU10</a>/<a href="https://github.com/Sycnex/Windows10Debloater">Windows10Debloater</a> can make things less worse. Additionally, using <a href="https://privacy.sexy/">privacy.sexy</a> can make it better. If we need to go further,
<a href="https://github.com/W4RH4WK/Debloat-Windows-10">Debloat-Windows-10</a> has a whole set of useful scripts to run or customize, for example, my favorite <a href="https://github.com/W4RH4WK/Debloat-Windows-10/blob/cd54358ed76267cd83fb5d04d160c7870c7779e8/scripts/disable-services.ps1">disable-services.ps1</a>.</p>
<p>Even not for privacy enhancement, just for better resource efficiency. These post-install scripts are worth to have—by reducing background CPU/Network/Disk activity, RAM/Storage consumption.</p>
<p>Yes, if use the aggressive rule set, it will break things up—until you notice it. Even if it really bothers you, most of the time it is reversible.</p>
<p>For more security enhancement, BitLocker/<a href="https://github.com/veracrypt/VeraCrypt">VeraCrypt</a> and <a href="https://github.com/simeononsecurity/Windows-Optimize-Harden-Debloat">Windows-Optimize-Harden-Debloat</a> are recommended.</p>
<p><a href="https://www.henrypp.org/product/simplewall">henrypp&rsquo;s simplewall</a> + <a href="https://www.henrypp.org/product/hostsmgr">hostsmgr</a> is a good alternative to Windows Firewall + SmartScreen which doesn&rsquo;t cut off all those crazy traffic with Microsoft and its affiliate servers.</p>
<p>hostsmgr generates a huge host file for blocking those unnecessary traffic as much as possible but it conflicts with DNS client service (dnscache). <a href="https://github.com/StevenBlack/hosts/blob/master/disable-dnscache-service-win.bat">StevenBlack&rsquo;s script</a> solves the problem or by simply switching to <a href="https://nextdns.io/">NextDNS</a> which is a modern alternative to the old hosts file methods.</p>
<p>For machines with 4GB of RAM and 32GB of storage in the modern days, we may need some cleanup methods from the old days but not with those outdated tools.</p>
<p>Also made by henrypp, <a href="https://www.henrypp.org/product/memreduct">memreduct</a> can save a lot of memory that eating up by poorly made software. Use it wisely will definitely optimize the system performance. For storage, with <a href="https://www.bleachbit.org">bleachbit</a> and <a href="https://windirstat.net/">WinDirStat</a> would be enough to keep C13 running for years.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://techshinobi.org/tags/thinkpad/">ThinkPad</a></li>
      <li><a href="https://techshinobi.org/tags/yoga/">Yoga</a></li>
      <li><a href="https://techshinobi.org/tags/mate/">MATE</a></li>
      <li><a href="https://techshinobi.org/tags/ltsc/">LTSC</a></li>
      <li><a href="https://techshinobi.org/tags/c13/">C13</a></li>
      <li><a href="https://techshinobi.org/tags/depthboot/">Depthboot</a></li>
      <li><a href="https://techshinobi.org/tags/keyd/">Keyd</a></li>
      <li><a href="https://techshinobi.org/tags/arkenfox/">Arkenfox</a></li>
      <li><a href="https://techshinobi.org/tags/optimazation/">Optimazation</a></li>
      <li><a href="https://techshinobi.org/tags/bootloader/">Bootloader</a></li>
      <li><a href="https://techshinobi.org/tags/chromebook/">Chromebook</a></li>
      <li><a href="https://techshinobi.org/tags/debloat/">Debloat</a></li>
      <li><a href="https://techshinobi.org/tags/coreboot/">Coreboot</a></li>
      <li><a href="https://techshinobi.org/tags/system-migration/">System Migration</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://techshinobi.org/posts/lipsync/">
    <span class="title">« Prev</span>
    <br>
    <span>Experimenting Lip Syncing Deepfake Tools</span>
  </a>
  <a class="next" href="https://techshinobi.org/posts/opn30/">
    <span class="title">Next »</span>
    <br>
    <span>Dehaunting OnePlus Nord N30 5G</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Updating ThinkPad C13 Yoga on x"
            href="https://x.com/intent/tweet/?text=Updating%20ThinkPad%20C13%20Yoga&amp;url=https%3a%2f%2ftechshinobi.org%2fposts%2ftpc13%2f&amp;hashtags=ThinkPad%2cC13%2cYoga%2cMATE%2cLTSC%2cC13%2cDepthboot%2ckeyd%2cArkenfox%2cOptimazation%2cbootloader%2cChromebook%2cDebloat%2ccoreboot%2csystemmigration">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Updating ThinkPad C13 Yoga on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2ftechshinobi.org%2fposts%2ftpc13%2f&amp;title=Updating%20ThinkPad%20C13%20Yoga&amp;summary=Updating%20ThinkPad%20C13%20Yoga&amp;source=https%3a%2f%2ftechshinobi.org%2fposts%2ftpc13%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Updating ThinkPad C13 Yoga on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2ftechshinobi.org%2fposts%2ftpc13%2f&title=Updating%20ThinkPad%20C13%20Yoga">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Updating ThinkPad C13 Yoga on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2ftechshinobi.org%2fposts%2ftpc13%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Updating ThinkPad C13 Yoga on whatsapp"
            href="https://api.whatsapp.com/send?text=Updating%20ThinkPad%20C13%20Yoga%20-%20https%3a%2f%2ftechshinobi.org%2fposts%2ftpc13%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Updating ThinkPad C13 Yoga on telegram"
            href="https://telegram.me/share/url?text=Updating%20ThinkPad%20C13%20Yoga&amp;url=https%3a%2f%2ftechshinobi.org%2fposts%2ftpc13%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Updating ThinkPad C13 Yoga on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Updating%20ThinkPad%20C13%20Yoga&u=https%3a%2f%2ftechshinobi.org%2fposts%2ftpc13%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://techshinobi.org/">Tech Shinobi</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
